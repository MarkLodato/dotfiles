#!/bin/sh
# Check for symbols already defined in the system Compose file

# syms is from https://github.com/rrthomas/syms

UNICODE_REGEX="[^<](U[0-9a-fA-F]{4,8})[^>]"
# FIXME: Lots of valid duplicates, e.g. hyphens/macrons & fractions

find_unicode () {
    cat "$@" | rep 's/#.*$//' - | syms -s $UNICODE_REGEX | sort | uniq
}

find_unicode /usr/share/X11/locale/en_US.UTF-8/Compose > compose.syms
find_unicode xcompose > ours.syms
grep -F -x -f ours.syms compose.syms > overlap.syms
